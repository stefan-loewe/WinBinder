<html>
<head>
<title>Callback functions</title>
<meta name="generator" content="Namo WebEditor v5.0">
<link rel="stylesheet" href="../help.css">
</head>
<body>
<!--KW:
Functions
Functions, Callback
Callback functions
Events
-->
<h2>Callback functions and window handlers</h2>
<p>WinBinder implements a callback mechanism so the application script can easily process
the events generated by controls or timers. While the main loop is active, the various
controls and objects keep sending messages to the main application window whenever
an event occurs. For example, if the&nbsp;user clicks a button or selects an
item from a list view, a message is generated and transmitted to the function
assigned as the current window handler.</p>
<h1>The callback function</h1>
<p>The callback function (or method) can have any valid PHP function name and&nbsp;has the following
prototype:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void <b>fn_handler </b>(int window, int id [, int ctrl [, int param1
[, int param2 [, int lparam3]]]])</p>
<p>The name <i>fn_handler</i> is a placeholder for the actual function or method 
name.
The parameter <i>window</i> is the window handle, <i>id</i> is the identifier
of the object that generated the message, <i>ctrl</i> is the control (if it
is the case) that generated the message, and <i>param1</i>, <i>param2</i> and 
<i>param3</i> are custom values that depend
on the class of the control that generated the message.</p>
<p>The callback function or method must be assigned to a window by a call to <a href="../functions/wb_set_handler.html"><b>wb_set_handler()</b></a><b>.</b></p>
<p><b><font color="#CC6600"><img src="../images/icon_note.png" align="absmiddle" width="32" height="32" border="0">
NOTE: </font></b>In the callback function,
<i>param1</i> can receive the value <span class="code"><code>IDDEFAULT</code></span>
to refer to the parent window itself instead of a control.</p>
<h1>Events</h1>
<p>Look at the table in the <a href="window_messages.html">window messages 
and events</a> 
page to see the events generated from all control classes.</p>
<h1><b><a name="flags"></a>Notification message flags</b></h1>
<p>To enable additional messages in a particular window, you must include <code>WBC_NOTIFY</code> in&nbsp;the <b><a href="../functions/wb_create_window.html">wb_create_window()</a></b> function
<i>style</i>
parameter when creating the window and use <i>param</i> to indicate which additional notification messages you
want to process. The flags are passed to the callback function via <i>param1</i>. 
The following notification flags are available:</p>
<table border="1" cellspacing="0" bordercolordark="white" bordercolorlight="black" width="70%">
    <tr>
        <th width="120">            <p>Notification flag</p>
        </th>
        <th width="440">            <p>Sent when</p>
        </th>
    </tr>
    <tr>
        <td width="120">
            <p><code>WBC_DBLCLICK</code></p>
        </td>
        <td width="440">
            <p>The control or the parent&nbsp;window was double-clicked.</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><code>WBC_MOUSEMOVE</code></p>
        </td>
        <td width="440">
            <p>The mouse cursor was moved over the main window.¹</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><span class="code"><code>WBC_MOUSEDOWN</code></span></p>
        </td>
        <td width="440">
            <p>A mouse button was pressed on the main window.¹</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><code>WBC_MOUSEUP</code></p>
        </td>
        <td width="440">
            <p>A mouse button was released on the main window.¹</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><code>WBC_KEYDOWN</code></p>
        </td>
        <td width="440">
            <p>A key was pressed when a given control has the focus.¹</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><span class="code"><code>WBC_KEYUP</code></span></p>
        </td>
        <td width="440">
            <p>A key was released when a given control has the focus.¹</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><code>WBC_GETFOCUS</code></p>
        </td>
        <td width="440">
            <p>A control has received the keyboard focus.</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><code>WBC_REDRAW</code></p>
        </td>
        <td width="440">
            <p>A request for screen redraw was posted on the message queue.</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><span class="code"><code>WBC_RESIZE</code></span></p>
        </td>
        <td width="440">
            <p>The parent window was resized.</p>
        </td>
    </tr>
    <tr>
        <td width="120">
            <p><code>WBC_HEADERSEL</code></p>
        </td>
        <td width="440">
            <p>A ListView column header was clicked or a TabControl tab is changed.</p>
        </td>
    </tr>
</table>
<p>¹ Mouse and keyboard notification messages can be further filtered using
the following additional notification message flags:</p>
<ul>
    <p><code>WBC_ALT<br>WBC_CONTROL<br>WBC_SHIFT<br>WBC_LBUTTON<br>WBC_MBUTTON<br>WBC_RBUTTON</code></p>
</ul>
<h1><b>See also</b></h1>
    <p><a href="../functions/wb_main_loop.html"><b>wb_main_loop<br></b></a><a href="../functions/wb_set_handler.html"><b>wb_set_handler<br></b></a><a href="window_messages.html">Window messages and events</a><br><a href="main_loop.html">The main loop</a><br></p>
<p>&nbsp;</p>
</body>

</html>
